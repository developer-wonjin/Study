# 1장. 도메인모델 시작

## 1.1 용어 정리

## 도메인

- 정의 :  **SW로 해결해야 할 현실세계의 문제영역** 

- 서브도메인

  - 도메인 더 구체적으로 잘게 쪼갤 수 있다

  - ```
    도메인 
    	- 온라인서점
    서브도메인
    	- 주문 ★★★★★ (다른 서브도메인과 연결된 수가 가장 많다)
    	- 회원
    	- 카탈로그
    	- 리뷰
    	- 정산
    	- 배송
    	- 결제
    ```

## 모델

- 개념모델 (도메인모델)
  - 정의 :  특정 도메인을 `개념적`으로 표현한 것
  - 목적 :  도메인자체를 이해하기 위한 개념모델
  - 표현방법
    1. 객체모델 (속성 + 기능)      :  아예 대놓고 `도메인모델` 이라 부르기도 함
    2. 상태다이어그램 (상태전이)
    3. 그래프
    4. 수학공식
  - 프로젝트 초기에 개요만 간략하게 만듬
    - 전체를 파악하기 위한 대략적인 지도다
- 구현모델
  - 목적 :  `구현기술`에 맞게 코드를 작성
  - 특징 :  개념모델을 최대한 따름
  - 구현과정에서 대략적인 개념모델을 구현모델로 점진적으로 발전시켜 나간다.

## 주의사항

- 동음이의어 조심!!!
  - `상품` 의 의미
    - (카탈로그 서브도메인)  가격, 상세내용 정보를 담은 대상  
    - (배송 서브도메인) 고객에게 실제로 배송되는 실물 상품
- 따라서, 두 서브도메인의 모델(개념모델, 구현모델)을 만들 땐 뭉쳐서 만들면 안된다.
  - 카탈로그 서브도메인의 모델 별도로
  - 배송 서브도메인의 모델 별도로



## 1.2. 도메인모델패턴

## 도메인모델 재정의

- 패턴이다. 표현계층, 응용계층, 도메인계층, 인프라계층 中 도메인계층을 `객체지향기법`으로 구현하는 패턴

## 단순 값을 지닌 정보 vs 도메인

```java
//primitive
int money = 10;

//dto, pojo
public class MoneyDTO{
    int value;
}

//vo, 값타입
public class Address{
    String city;
    String phone;
	
    public boolean inSeoul(){
        //....
    }
}


@Entity
public class Student{
    String name;
 
    //책임을 갖기에 메소드를 지님
    public Student(String name){
        if(name.size() <= 0)throw new IllegalArgumentException();
    }
}
```



## Getter 사용금지

- 절차적으로 바뀐다.
- getter는 정의하지 말것.
- 대신 책임을 부여하자(메소드 새로 추가하기)

## Setter 사용금지

- `setXXX` 메소드명으로 `도메인의 행위`가 파악되지 않는다.

- `completePayment( )` 와 같은 구체적인 의미로 메소드명 정의할 것

- setter로 값을 셋팅하는 습관보다 생성자를 통해 필드에 값을 채우는 것이 더 올바르다.

  - ```java
    //Bad
    Order order = new Order();
    order.setOrderLine(lines);
    order.setShippingInfo(shippingInfo);
    
    //Good
    Order order = new Order(lines, shippingInfo);
    ```

- 특히, 엔티티에서는 `private` 으로 setter를 정의하여 내부에서만 사용하자

  - 값타입에서는 아예 정의하지 말자



## 엔티티 vs 값타입

|                                         | 엔티티                                            | 값타입                                         |
| --------------------------------------- | ------------------------------------------------- | ---------------------------------------------- |
| 식별자 속성<br>(식별자로 추적가능 여부) | O                                                 | X                                              |
| 비유                                    | 살아있는 생물                                     | 단순 수치정보                                  |
| 타 엔티티가 함께 공유가능 여부          | O<br>여러 Member엔티티에 의해 Team엔티티가 참조됨 | X<br>여러회원이 동일 주소 값타입 공유하면 안됨 |
| 특징                                    | 참조됨, 참조함                                    | 엔티티 객체에 포함됨 **(참조되는 개념X)**      |

