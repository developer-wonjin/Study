# 네트워크 스터디

## 네트워크란

여러 개의 네트워크 장치가 `복잡한 그래프의 형태`를 띄는 통신망이다.

## 네트워크에서 데이터를 전송하는 방식

- 통신단위인 패킷을 네트워크 망으로 전송한다. 
- 패킷에 달려있는 도착지 정보를 활용해 스위치, 라우터를 거처 LAN에서 WAN으로 전달되는 방식으로 패킷이 여행을 떠난다. 
- 도착한 패킷은 TCP/IP 4Layer모델을 통해 여러 소프트웨어 모듈에 의해 디코딩된다. 
- 여러단계의 디코딩후 최종적으로 HTTP 메세지를 얻어내고 HTTP프로토콜을 준수하여 개발된 어플리케이션에 의해 해석되고
- 화면에 랜더링 되거나 서버의 input값으로 활용된다.

## 프로토콜에 대해 설명해주세요

네트워크 노드간에 정보를 올바르게 주고받기 위해 합의된 규칙이나 방법

- (예시)
- `IP`는 패킷을 수신지까지 전달하기 위해 사용되는 프로토콜이다 (IP주소를 이용함)
- `ARP`은 192.168.1.1과 같은 IP주소를 A1:B2:C3:D4:E5:F6로 변환하기 위한 프로토콜이다 (MAC주소를 이용)
- `HTTPS`는 HTTP에 비해 보안상 안전한 프로토콜이다
- `TCP`는 UDP에 비해 일반적으로 느리지만 신뢰성이 높은 프로토콜이다

# OSI 7 Layer

- https://docs.google.com/spreadsheets/d/1g_xwSz5nbIu-b_IhZXYrLWNu6RNaySA6CQRrCXeNy9g/edit

## 프로토콜 계층화란, 계층화하는 이유는?

1. 네트워크 구성과 설계를 용이하게 하기위해서
   - 계층별 프로토콜마다 가지고 있는 역할/목적에 따라 설계할 수 있음
2. 네트워크 문제진단과 해결이 간단해진다

## 네트워크 캡슐화, 비캡슐화

- 캡슐화: 각 네트워크 계층별 프로토콜마다 가지고 있는 역할/목적에 부합하는 헤더를 전송데이터에 추가
- 역캡슐화: 캡슐화에서 붙였던 헤더를 제거하는 디코딩과정

# [애플리케이션 계층]

## L7스위치 (로드밸런서)

- 서버부하 분산
- IP, PORT를 기반은 물론 HTTP헤더, URL, 서버, 캐시, 쿠키를 기반으로 트래픽분산한다
- 응용프로그램 수준의 트래픽 모니터링 가능함
- 헬스체크 기능을 통해 장애가 발생한 서버는 분산메커니즘에서 제외시킨다.
- AWS에서의 서비스이름 ALB (Application Load Balancer)

# [전송계층]

## TCP (전송계층의 프로토콜)

- HTTP1.1의 기반기술 
- 95% 사용중
- 연결지향  (3way handshake) 
- 데이터전달보증 
- 데이터순서보증 
- 신뢰할 수 있음
- 커스터마이징 불가

# [인터넷 네트워크 계층] -- 큰 물

## WAN (Wide Area Network)

- LAN끼리 통신하기 위해 사용되는 네트워크
- ISP (Internet Service Provider) ex. KT, SK, LG 등등 WAN을 관리함

##  IP (인터넷계층의 프로토콜)

- IP주소 부여 
- 패킷단위(1.5K byte) 전달 
- 비연결성(도착지 서버가 불능이여도...) 
- 비신뢰성 - 패킷이 소실됐을 떄 대처못함
- 패킷이 순서없이 도착했을 때 대처못함  
- 포트구분을 못함

## 라우터

- 패킷이 이동할 최적의 경로를 계산해주는 중간노드
- 관련 명령어
  - `tracert www.naver.com` - 윈도우
  - `tracerout www.naver.com` - 리눅스

## L3스위치 (=라우터)

- L2스위치와 라우팅을 모두 갖춘 장비
- 거의 라우터나 다름없다
- 하드웨어 기반 라우팅

## L4스위치 (로드밸런서)

- IP, PORT를 기반으로 특히 PORT기반으로만 분산함
- AWS에서의 서비스이름 NLB (Network Load Balancer)
- 헬스체크 기능있음



# [데이터링크계층] -- 작은 물

주소개념이 존재함(MAC주소), 송수신자를 인지할 수 있음, 송수신정보를 조작가능

## LAN (Local Area Network)

- 소규모 조직이 구축한 네트워크 (가정, 사무실)

## L2스위치

- MAC주소를 인식할 수 있기 때문에 Broadcast가 아닌 특정 목적지 호스트에게만 전달가능해짐
- MAC주소를 인식안되면 Broadcast 됨
- 전이중모드 지원
- IP주소는 이해하지 못해 LAN안의 구성원들에게만 전달한다

## 브리지

- LAN과 LAN을 연결짓는 장치

# [물리계층]

주소개념이 없음, 송수신한 정보에 대한 조작, 판단할 수 없음 

## 이더넷

- 유선LAN환경에서 가장 대중적으로 사용되는 기술로서
- 다양한 디바이스의 규격, 송수신 프레임의 형태, 프레임송수신방법을 정의한 기술
  - 따라서, 물리계층과 데이터링크계층 모두에 소속된 기술이다
  - 데이터링크계층 => `이더넷프레임형식`
  - 물리계층 => `통신매체`

## 허브 (오늘날 거의 사용하지 않음)

- 여러대의 호스트를 연결하는 장치
- 주소개념이 없기 때문에 연결된 호스트들에게 broadcast를 함
- 무전기처럼 반이중모드 통신
  - 따라서 양쪽에서 서로 송신하려고 할 때 충돌이 발생할 가능성이 있기 때문에 연결된 호스트가 많으면 많을수록 충돌이 많이 남
  - 충돌을 해결할 수 있는 방법
    - 데이터링크계층의 `스위치` 사용 (콜리전도메인영역을 축소시켜줌)
    - CSMA/CD 프로토콜을 사용함

## 리피터 

- 물리신호가 감소되거나 왜곡되는 것을 방지하기 위해 전기신호를 증폭시켜줌
- 송수신데이터에 대한 어떠한 판단이나 조작을 할 수 없음. 그저 증폭기
- 허브가 리피터를 포함함



## NIC

- NIC (Network Interface Controller)
  - 호스트를 네트워크에 연결짓는 장비
  - TCP/IP 4계층의 네트워크인터페이스 계층에서 MAC주소를 이용함



# 질문

Q. AP는 공유기인가?

Q. 라우터는 공유기인가?

Q. 계층마다 PDU가 있는데 PDU하나가 패킷인가

Q. LAN 내부에서의 통신은 1계층, 2계층만 사용되는 걸까?

Q. 라우팅테이블의 `인터페이스` 란 무슨뜻인가?
